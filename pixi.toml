[workspace]
authors = ["Lukas Hermann <1734032+lsh@users.noreply.github.com>"]
channels = ["https://conda.modular.com/max-nightly", "conda-forge"]
name = "shimmer"
platforms = ["osx-arm64", "linux-64"]
version = "0.1.0"

[tasks]
setup = { cmd = "mkdir -p build" }
build-shader = { cmd = "mojo build --emit=shared-lib shader.mojo", depends-on = ["setup"] }
build = { cmd = "mojo build main.mojo -o build/main", depends-on = ["setup", "build-shader"] }
exec = { cmd = "./build/main", depends-on = ["build", "build-shader"] }

[target.osx-arm64.activation]
env = {MODULAR_MOJO_MAX_SYSTEM_LIBS="-lm,-L.pixi/envs/default/lib/,-lglfw,-lglad,-framework,OpenGL"}

[target.linux-64.activation]
env = {MODULAR_MOJO_MAX_SYSTEM_LIBS="-lrt,-ldl,-lpthread,-lm,-L/opt/cuda/lib/,-L.pixi/envs/default/lib/,-L/usr/lib/,-lGL,-lEGL,--lglfw,-lglad"}

[dependencies]
max = ">=25.7.0.dev2025092305,<26"
mojo = ">=0.25.7.0.dev2025092305,<0.26"
glfw = ">=3.4.0,<4"
glad = ">=0.1.36,<0.2"
